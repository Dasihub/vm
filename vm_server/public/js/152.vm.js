"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[152],{9948:(e,t,s)=>{s.d(t,{t:()=>n});const n=(e,t)=>e.reduce((function(e,s){return(e[s[t]]=e[s[t]]||[]).push(s),e}),{})},3152:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var n=s(5893),a=s(7294),c=s(5248),i=s(7026);const l={table:"vk5XedVR0EchYhFxmRSq"};var r=s(927),d=s(9948),h=s(9560),j=s(1491),x=function(e,t,s,n){return new(s||(s=Promise))((function(a,c){function i(e){try{r(n.next(e))}catch(e){c(e)}}function l(e){try{r(n.throw(e))}catch(e){c(e)}}function r(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(i,l)}r((n=n.apply(e,t||[])).next())}))};const u=()=>{var e;const{request:t,loader:s}=(0,r.i)(),u=(0,j.U)(),{years:o,isLoaderYear:m}=(0,i.X)((e=>e.yearReducer)),{id_role:b,id_user:g}=(0,i.X)((e=>e.authReducer)),[v,f]=a.useState(!1),[O,N]=a.useState([]),[p,y]=a.useState({value:null,label:""}),[_,w]=a.useState(!1),[k,S]=a.useState(null),$=e=>x(void 0,void 0,void 0,(function*(){_&&w(!1),O.length&&N([]);const{data:s}=yield t(`/student/payment?id_year=${e}&id_role=${b}&id_user=${g}`);if(s.length)return N(s);w(!0)})),E=e=>{S(e),f(!0)},R=(0,d.t)(O,"w_s");return a.useEffect((()=>{if(o.length){const{id_a_year:e,p32:t}=o.find((e=>1==e.defaultValue));y({label:t,value:e}),$(e)}}),[o]),(0,n.jsxs)(n.Fragment,{children:[v&&(0,n.jsx)(c.bZ,{hide:f.bind(null,!1),confirm:()=>x(void 0,void 0,void 0,(function*(){f(!1);const{message:e,type:s}=yield t(`/student/payment/${k}/${b}/${g}`,"DELETE");$(p.value),u(e,s)}))}),(0,n.jsx)("div",Object.assign({className:"box_container"},{children:(0,n.jsx)("div",Object.assign({className:l.container},{children:(0,n.jsx)("div",Object.assign({className:"w-100"},{children:(0,n.jsx)(c.uU,{placeholder:"Учебный год",label:"Учебный год",value:p,options:o.map((e=>({value:e.id_a_year,label:e.p32}))),onChange:e=>{y(e),$(e.value)},loader:m})}))}))})),(0,n.jsxs)("div",Object.assign({style:{minHeight:"60vh"},className:"box_container w-100 mt-2"},{children:[s&&(0,n.jsx)("div",Object.assign({className:"flex justify-content-center mt-2"},{children:(0,n.jsx)(c.aN,{})})),_&&(0,n.jsx)("p",Object.assign({className:"text-center mt-2"},{children:"Пока нет данных!"})),O.length?(0,n.jsxs)("h3",Object.assign({className:"flex justify-content-end"},{children:[(0,n.jsx)("span",Object.assign({style:{fontWeight:"400",marginRight:"5px"}},{children:"Шифр: "}))," ",null===(e=O[0])||void 0===e?void 0:e.shifr]})):null,Object.keys(R).map(((e,t)=>(0,n.jsxs)("div",{children:[e.length?(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("h3",Object.assign({className:"mt-2"},{children:e}))}):null,(0,n.jsx)("div",Object.assign({style:{height:"64vh",overflowY:"auto"}},{children:(0,n.jsxs)("table",Object.assign({className:l.table},{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",Object.assign({className:"text-center"},{children:"№"})),(0,n.jsx)("th",Object.assign({className:"text-center"},{children:"Дисциплина"})),(0,n.jsx)("th",Object.assign({className:"text-center"},{children:"Вид занятие"})),(0,n.jsx)("th",Object.assign({className:"text-center"},{children:"Преподаватель"})),(0,n.jsx)("th",Object.assign({className:"text-center"},{children:"Дата"})),(0,n.jsx)("th",Object.assign({className:"text-center"},{children:"Оценка"})),(0,n.jsx)("th",Object.assign({className:"text-center"},{children:"Оплачено"})),(0,n.jsx)("th",Object.assign({className:"text-center"},{children:"Действие"}))]})}),(0,n.jsx)("tbody",{children:R[e].map(((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",Object.assign({className:"text-center"},{children:t+1})),(0,n.jsx)("td",Object.assign({className:"text-center"},{children:e.discipline})),(0,n.jsx)("td",Object.assign({className:"text-center"},{children:e.short_name})),(0,n.jsx)("td",Object.assign({className:"text-center"},{children:e.t_fio})),(0,n.jsx)("td",Object.assign({className:"text-center"},{children:e.visitDate})),(0,n.jsx)("td",Object.assign({className:"text-center"},{children:e.otsenka})),(0,n.jsx)("td",Object.assign({className:"text-center"},{children:e.paymentStatus})),(0,n.jsx)("td",Object.assign({className:"text-center"},{children:!!e.statusDel&&(0,n.jsx)("img",{onClick:E.bind(null,e.id),className:"pointer",src:h.rF,alt:"trash"})}))]},e.id)))})]}))}))]},e+t)))]}))]})}}}]);